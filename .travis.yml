language: java
jdk:
- oraclejdk8
- oraclejdk9
env:
  matrix:
  - COVERAGE=0.05 BUILD_TARGET=./monolithic/ui
  - COVERAGE=0.14 BUILD_TARGET=./monolithic/service/cart
  - COVERAGE=0.0 BUILD_TARGET=./monolithic/service/user
  - COVERAGE=0.36 BUILD_TARGET=./monolithic/repository/order
  - COVERAGE=0.0 BUILD_TARGET=./monolithic/repository/cart
  - COVERAGE=0.12 BUILD_TARGET=./monolithic/repository/product
  - COVERAGE=0.31 BUILD_TARGET=./monolithic/repository/user
  global:
  - secure: I5DaPyrIDL2/RuhwBM62m+tKM8dCyFDy921Y0mBg+8SIDvbPOz6YAwM5K5a+Lmba0GN9VCMeaXwNEp069lxFWwOu/ckTZBKxVMn8u+TJrk61qdPa2fGHPpKRFFL6wxZaPBTFcd1ph0q0huB3TxTtemWFHu26agj9pbHZQO7snipflmzDib+5v/Hyp2I4u9yJ9LmvQIDxC2GHhzTHmUQiK8tjwuNQc8npSkXoDXmOgL8B8KMTTm5Uc2eL1vrDIudFdqoxQFyR3AINiYeMDWBeo4pKts28b6wjxLclhwH+pKVjC/ylBi0zWzEMP9mHid3ujv9gTsCCMcUzb8+q5Q/ddQzPn1/iCC+KqaFRTKHXrQMDNuvRLXFIiVAXHociRY/tfNAXnWPJzNmE3qjFDfFAKdgJqddEgVkoUpfUXFo8B6ZfndF2OXVZ44rthC1ImvqZYzEhbLatSqam1agmCfCPDWUm6o8CDLdiuAaWJrLfA8279h2SMORlF4HwrvcMn7CNRIxTRJh6f4WHCkSds8jYIPIx6u042aook8tWBn8I1KLn80FzgSgz3MFVdoMRfQysYQRoUsjbfhLQEnw24ieyCjRIAWMlksDijLcSj5DHpzJ8uhntx43sbyOp9GpeeGfUwJsfJaN2PNzdtpPfKFOmARuuUOuF0XsfUjC+hx9NlPc=
  - secure: jltzmQqeaI2fUaC83k0qMmyv9Vqk6icY5TW3Mkic3v0mf5xT/qJudHTp3E0lTIRT6T8Z4t8OR8w5HsfT7dGHiyrCVY5WV05bfC3X6OJuhFGcFs+HzBqYjMC3GgIDcJ08HlFQ09NXWNfWICFlHl2UHVM09idnfBRfXcZiWON+SdX9AnxbyVTnfneaVqXG6CLmtBApmtncHDtbHtBql63LQmnu7cbxQ7ZRQQC4KOath7duv4QhLDz3enJfF9yReH6t3Ix2r14kaOkgg4Hph+soDSjXb4eact9gZk+8tKgsC2CVizwkp8vcA1KZnzxCv3YbAcOaCdhnafUtnJQsufHkw3o1Xgi9uXz7yhag884iYhGGwkv7VQnNuPW6SH4GixK80SL41b+PTxANGJF7ev3dLvDW4J8CtCrLgRItqh39YgfGOqjWXjRzFEtvcB7iznd0GvaFajNjR/TBU1Sd+lUEtmc+koRUM2MtP/0M0/FhNfBbGI6vCfDWIeDunz3YMEbbAjmaKJUSjFLTCwfdwHj1KZEO+OMfrtZBdcZMx4+7yKBXjtl1NGOzJXEazORe2JdPBDyADaXp4qo7F4oeMixJu1IvXjYrHAeExzVva2CDfc9syaNngWNurW+Z0RHEBtL0N9CqecqQX58ySHygZt5yQIOUjq2Q2WkpWx+lL1a5ce4=
install:
- ./gradlew clean jar
script:
- ./gradlew -p $BUILD_TARGET check
after_success:
- find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'
deploy:
  provider: script
  script:
    - docker login --password "${DOCKER_PASSWORD}" --username "${DOCKER_LOGIN}";
  on:
    all_branches: true
